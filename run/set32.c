/*
    module  : set32.c
    version : 1.2
    date    : 10/26/20

	int set_bit(unsigned set, int bit)
	int tst_bit(unsigned set, int bit)
	int del_bit(unsigned set, int bit)
	int set_drop(unsigned set, int bit)
	int set_take(unsigned set, int bit)
*/
#include "set32.h"

static unsigned power2[SETSIZE + 1] = {
    1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384,
    32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608,
    16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824,
    2147483648U, 0
};

static unsigned compl2[SETSIZE + 1] = {
    4294967294U, 4294967293U, 4294967291U, 4294967287U, 4294967279U,
    4294967263U, 4294967231U, 4294967167U, 4294967039U, 4294966783U,
    4294966271U, 4294965247U, 4294963199U, 4294959103U, 4294950911U,
    4294934527U, 4294901759U, 4294836223U, 4294705151U, 4294443007U,
    4293918719U, 4292870143U, 4290772991U, 4286578687U, 4278190079U,
    4261412863U, 4227858431U, 4160749567U, 4026531839U, 3758096383U,
    3221225471U, 2147483647, 0
};

static unsigned fmask2[SETSIZE + 1] = {
    0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383,
    32767, 65535, 131071, 262143, 524287, 1048575, 2097151, 4194303, 8388607,
    16777215, 33554431, 67108863, 134217727, 268435455, 536870911, 1073741823,
    2147483647, 0
};

static unsigned rmask2[SETSIZE + 1] = {
    4294967295U, 4294967294U, 4294967292U, 4294967288U, 4294967280U,
    4294967264U, 4294967232U, 4294967168U, 4294967040U, 4294966784U,
    4294966272U, 4294965248U, 4294963200U, 4294959104U, 4294950912U,
    4294934528U, 4294901760U, 4294836224U, 4294705152U, 4294443008U,
    4293918720U, 4292870144U, 4290772992U, 4286578688U, 4278190080U,
    4261412864U, 4227858432U, 4160749568U, 4026531840U, 3758096384U,
    3221225472U, 2147483648U, 0
};

int set_bit(unsigned set, int bit)
{
    return set | power2[bit];
}

int tst_bit(unsigned set, int bit)
{
    return set & power2[bit];
}

int del_bit(unsigned set, int bit)
{
    return set & compl2[bit];
}

int set_drop(unsigned set, int bit)
{
    return set & rmask2[bit];
}

int set_take(unsigned set, int bit)
{
    return set & fmask2[bit];
}
